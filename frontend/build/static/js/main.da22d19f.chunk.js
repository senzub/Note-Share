(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{40:function(e,t,n){e.exports=n(87)},64:function(e,t,n){},69:function(e,t,n){},70:function(e,t,n){},71:function(e,t,n){},72:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){},76:function(e,t,n){},77:function(e,t,n){},78:function(e,t,n){},79:function(e,t,n){},80:function(e,t,n){},82:function(e,t,n){},83:function(e,t,n){},84:function(e,t,n){},87:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(19),i=n.n(r),s=n(2),c=n(3),l=n(6),u=n(4),d=n(5),p=n(90),h=n(39),m=n(35),f=n.n(m).a.create({baseURL:"https://note-share-be.herokuapp.com"}),g=n(21),E=(n(64),function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={notepads:[]},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;f.get("/notepads").then(function(t){return e.setState({notepads:t.data})}).catch(function(e){console.log("err",e)})}},{key:"render",value:function(){var e=this.state.notepads.map(function(e,t){var n=new Date(e.created_at);return o.a.createElement(g.a,{key:t,to:"/".concat(e.gid,"/").concat(e.id)},o.a.createElement("div",{className:"notepads__item"},o.a.createElement("div",{className:"notepads__item-title-author"},o.a.createElement("h3",{className:"notepads__item-title"},"Title - ",e.title),o.a.createElement("h4",{className:"notepads__item-author"},"By - ",e.author)),o.a.createElement("div",{className:"notepads__item-date"},o.a.createElement("h4",null,"".concat(n.getMonth()+1,"/").concat(n.getDate(),"/").concat(n.getFullYear())))))});return o.a.createElement("div",null,o.a.createElement("h2",{className:"notepads__heading"},"All Notepads"),o.a.createElement("div",{className:"notepads"},o.a.createElement("ul",{className:"notepads__list"},e)))}}]),t}(o.a.Component)),v=n(8),N=function(e){return function(t){f.get("/notepads/".concat(e)).then(function(e){t({type:"FETCH_USER_NOTEPADS",payload:e.data})})}},b=function(){return{type:"UNLOAD"}},O=(n(69),function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).onAuthChange=function(e){if(e){var t=n.auth.currentUser.get().getBasicProfile(),a={userId:t.getId(),email:t.getEmail(),name:t.getName(),imageUrl:t.getImageUrl()};n.props.signIn(a)}else n.props.signOut()},n.onSignInClick=function(){n.auth.signIn()},n.onSignOutClick=function(){n.auth.signOut()},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;window.gapi.load("client:auth2",function(){window.gapi.client.init({clientId:"532921942999-gv0bv0ru9qm9mkbhvg46or2q5am0emur.apps.googleusercontent.com",scope:"email"}).then(function(){e.auth=window.gapi.auth2.getAuthInstance(),e.onAuthChange(e.auth.isSignedIn.get()),e.auth.isSignedIn.listen(e.onAuthChange)})})}},{key:"renderAuthButton",value:function(){return null===this.props.isSignedIn?null:this.props.isSignedIn?o.a.createElement("button",{onClick:this.onSignOutClick,className:"ui inverted massive white google button google-auth google-auth__sign-out"},o.a.createElement("i",{className:"google icon"}),"Sign Out"):o.a.createElement("button",{onClick:this.onSignInClick,id:"signin",className:"ui inverted massive white google button google-auth google-auth__sign-in"},o.a.createElement("i",{className:"google icon"}),"Sign In with Google")}},{key:"render",value:function(){return o.a.createElement("div",null,this.renderAuthButton())}}]),t}(o.a.Component)),I=Object(v.b)(function(e){return{isSignedIn:e.auth.isSignedIn,userInfo:e.auth.userInfo}},{signIn:function(e){return function(t){var n={userId:e.userId,email:e.email,name:e.name};f.get("/users/create",{params:n}).then(function(n){t({type:"SIGN_IN",payload:e})}).catch(function(e){console.log("err")})}},signOut:function(){return{type:"SIGN_OUT"}}})(O),y=(n(70),n(71),Object(v.b)(function(e){return{isSignedIn:e.auth.isSignedIn,userInfo:e.auth.userInfo}})(function(e){return o.a.createElement("header",{className:"header"},o.a.createElement("div",null,o.a.createElement("h2",{className:"heading-primary"},o.a.createElement(g.a,{to:"/",className:"header__link"},"Note-Share"))),o.a.createElement("div",{className:"profile"},e.isSignedIn?(t=e.userInfo,o.a.createElement("div",{className:"profile__container"},o.a.createElement("div",{className:"profile__img-container"},o.a.createElement("img",{className:"profile__img",src:"".concat(t.imageUrl),alt:"Profile"})),o.a.createElement("h4",null,o.a.createElement(g.a,{className:"profile__link",to:"/".concat(t.userId,"/")},"Go To Profile - ",t.name)))):null,o.a.createElement("div",{className:"google-auth__container"},o.a.createElement(I,null))));var t})),_=n(89),T=n(88),D=(n(72),function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={notepads:[],deleted:!1},n.addNotepad=function(){n.props.createUserNotepad(n.props.gid)},n.deleteNotepad=function(e){n.props.deleteUserNotepad(e)},n.redirectAdd=function(){if(n.props.added){var e=n.props.notepads.length-1,t=n.props.notepads[e];return o.a.createElement(_.a,{to:"/".concat(n.props.gid,"/").concat(t.id)})}return null},n.redirectDelete=function(){return n.props.deleted?o.a.createElement(_.a,{to:"/".concat(n.props.gid)}):null},n.renderDeleteNotepad=function(e){if(n.props.userInfo&&n.props.userInfo.userId===e.user_id)return o.a.createElement("button",{onClick:function(){return n.deleteNotepad(e.id)},className:"sidebar-delete-btn"},"Delete Notepad")},n.renderAddNotepad=function(){if(n.props.userInfo&&n.props.userInfo.userId===n.props.gid)return o.a.createElement("button",{className:"sidebar-add-btn",onClick:n.addNotepad},"Add Notepad")},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchUserNotepads(this.props.gid)}},{key:"componentWillUnmount",value:function(){this.props.unload()}},{key:"render",value:function(){var e=this,t=this.props.notepads.map(function(t,n){var a=new Date(t.created_at),r=t.TITLE.length>17?t.TITLE.slice(0,17).concat("..."):t.TITLE;return o.a.createElement("li",{key:n},o.a.createElement(T.a,{exact:!0,to:"/".concat(t.user_id,"/").concat(t.id),className:"sidebar-links",activeClassName:"active"},o.a.createElement("h2",{className:"sidebar-link-title"},r),o.a.createElement("h4",{className:"sidebar-link-date"},"JUST NOW"===t.created_at?t.created_at:"".concat(a.getMonth()+1,"/").concat(a.getDate(),"/").concat(a.getFullYear())),e.renderDeleteNotepad(t)))});return o.a.createElement("nav",{className:"sidebar"},this.redirectDelete(),this.redirectAdd(),o.a.createElement("h1",{className:"sidebar-heading"},"Notes"),o.a.createElement("div",{className:"sidebar-add-btn-container"},this.renderAddNotepad()),o.a.createElement("ul",{className:"sidebar-links-ul"},t))}}]),t}(o.a.Component)),j=Object(v.b)(function(e,t){var n=e.userNotepads,a=(n=n.filter(function(e,t){return!n.includes(e,t+1)})).length>0?n[0].user_id:"";return{notepads:n,userInfo:e.auth.userInfo,deleted:e.deleted,added:e.added,viewId:a}},{fetchUserNotepads:N,createUserNotepad:function(e){return function(t){f.post("/notepads/create",{gid:e}).then(function(n){t({type:"CREATE_USER_NOTEPAD",payload:{id:n.data.insertId,user_id:e}}),t({type:"NOTE_ADDED"})})}},deleteUserNotepad:function(e){return function(t){f.delete("/notepads/deletenotepad",{params:{id:e}}).then(function(n){t({type:"DELETE_USER_NOTEPAD",payload:{id:e}}),t({type:"NOTE_DELETED"})}).catch(function(e){console.log(e)})}},unload:b})(D),S=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this.props.location.pathname;if(t!==e.location.pathname){var n=t.split("/");n=n.filter(function(e){return e.length>0}),this.props.resetDelete(),this.props.resetAdd(),this.props.unload(),this.props.fetchUserNotepads(n[0])}}},{key:"render",value:function(){return o.a.createElement(j,{url:this.props.location.pathname,gid:this.props.match.params.gid})}}]),t}(o.a.Component),k=Object(v.b)(null,{resetDelete:function(){return{type:"NOTE_NOT_DELETED"}},resetAdd:function(){return{type:"NOTE_NOT_ADDED"}},unload:b,fetchUserNotepads:N})(S),C=(n(74),function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).renderSaveText=function(){var e=n.props,t=e.pending,a=e.fulfilled,o=e.rejected;return t||a||o?t?"Saving...":a?"Success!":o?"Failed! Try Again":void 0:"Save Notes"},n.renderBtns=function(){return n.props.userInfo.userId===n.props.gid?o.a.createElement("div",{className:"toolbar-btn-container"},o.a.createElement("button",{className:"toolbar-btn",onClick:n.props.addNote},"Add Note"),o.a.createElement("button",{className:"toolbar-btn",onClick:n.props.saveNotes},n.renderSaveText()),o.a.createElement("button",{className:"toolbar-btn toolbar-btn--delete",onClick:n.props.deleteNotes},"Delete Notes")):o.a.createElement("div",{className:"toolbar-btn-container"},o.a.createElement("h3",{className:"toolbar-author"},"By - ",n.props.author))},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return this.props.userInfo?o.a.createElement("div",{className:"toolbar-container"},this.renderBtns()):null}}]),t}(o.a.Component)),A=Object(v.b)(function(e){return{userInfo:e.auth.userInfo}})(C),x=n(24),w=n.n(x),U=(n(75),function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).toggleDeleteBtn=function(){n.setState({showDeleteBtn:!n.state.showDeleteBtn,active:!n.state.active})},n.handleDrag=function(e,t){var a={x:t.x,y:t.y};n.setState({position:a}),n.props.updateNote(a,n.props.note)},n.handleChange=function(e){var t=e.target.value.replace("\u21b5","\n");n.setState({text:t}),n.props.updateNote(t,n.props.note)},n.makeEditable=function(e){e.stopPropagation(),n.setState({editable:!0,active:!0})},n.removeEditable=function(e){e.stopPropagation(),n.setState({editable:!1,active:!1})},n.makeHidden=function(){n.setState({visible:!1})},n.renderDeleteBtn=function(){return n.state.showDeleteBtn?o.a.createElement("div",{onClick:function(e){n.props.deleteNote(n.props.note),n.makeHidden()},style:{position:"absolute"},className:"notetext-delete-btn"},"X"):null},n.renderContent=function(){return n.state.editable?o.a.createElement("textarea",{autoFocus:!0,className:"notetext-textarea",onBlur:n.removeEditable,onChange:function(e){return n.handleChange(e)},value:n.state.text}):o.a.createElement("div",{className:"notetext-content"},o.a.createElement("p",{onDoubleClick:n.makeEditable},n.state.text?n.state.text:"Double Click to Add Text"))},n.state={editable:!1,text:"",showDeleteBtn:!1,visible:!0,active:!1},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.setState({text:this.props.note.text})}},{key:"render",value:function(){var e=this.props.note.position.x?this.props.note.position:{x:25,y:50},t={position:"absolute",display:this.state.visible?"inline-block":"none",zIndex:this.state.active?10:0};return this.props.userInfo?this.props.userInfo.userId!==this.props.gid?o.a.createElement(w.a,{onDrag:this.handleDrag,disabled:!0,defaultPosition:e},o.a.createElement("div",{style:t,className:"notetext"},o.a.createElement("div",{className:"notetext-delete"},this.renderDeleteBtn()),o.a.createElement("div",{className:"notetext-content"},o.a.createElement("p",null,this.state.text)))):o.a.createElement(w.a,{onDrag:this.handleDrag,disabled:!!this.state.editable,defaultPosition:e},o.a.createElement("div",{style:t,onMouseEnter:this.toggleDeleteBtn,onMouseLeave:this.toggleDeleteBtn,className:"notetext"},o.a.createElement("div",{className:"notetext-delete"},this.renderDeleteBtn()),this.renderContent())):null}}]),t}(o.a.Component)),L=Object(v.b)(function(e){return{userInfo:e.auth.userInfo}})(U),B=(n(76),function(e){return o.a.createElement("div",{id:"spinner",className:"ui active inverted dimmer"},o.a.createElement("div",{className:"ui big text loader"},e.message))}),P=(n(77),function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).renderTitle=function(){return n.props.userInfo.userId===n.props.gid?o.a.createElement("input",{type:"text",className:"notepad-title",autoFocus:!0,value:"untitled"===n.props.title||"undefined"===n.props.title?"":n.props.title,onChange:n.props.handleTitleChange,onBlur:n.props.saveTitle}):o.a.createElement("input",{type:"text",className:"notepad-title",disabled:!0,value:n.props.title})},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return this.props.userInfo?o.a.createElement(o.a.Fragment,null,this.renderTitle()):null}}]),t}(o.a.Component)),F=Object(v.b)(function(e){return{userInfo:e.auth.userInfo}})(P),R=(n(78),n(79),function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleTitleChange=function(e){n.prevTitle=e.target.value.slice(0,-1),n.setState({title:e.target.value})},n.saveTitle=function(e){var t={id:n.props.match.params.id,title:n.state.title};f.put("/notepads/updatetitle",t).then(function(e){n.props.editNotepadTitle(t)}).catch(function(e){console.log("err",e)})},n.addNote=function(){var e=n.state.notes;e.push({text:"",position:{x:null,y:null}}),n.setState({notes:e})},n.updateNote=function(e,t){var a=n.state.notes,o=n.state.notes.indexOf(t);"string"===typeof e?a[o].text=e.replace("\u21b5","<br/>"):a[o].position=e,n.setState({notes:a})},n.saveNotes=function(e){e.preventDefault();var t=n.state.notes,a=n.state.deletedNoteInd;t=t.filter(function(e,t){return!a.includes(t)}),n.setState({pending:!0}),f.put("/notepads/savenotes",{notes:t,id:n.props.match.params.id}).then(function(e){n.setState({pending:!1,fulfilled:!0,rejected:!1})}).catch(function(e){n.setState({pending:!1,rejected:!0,fulfilled:!1})})},n.deleteNote=function(e){var t=n.state.notes.indexOf(e),a=n.state.deletedNoteInd;a.push(t),n.setState({deletedNoteInd:a})},n.deleteNotes=function(e){e.preventDefault(),f.put("/notepads/deletenotes",{notes:n.state.notes,id:n.props.match.params.id}).then(function(e){n.setState({notes:[]})}).catch(function(e){console.log("err",e)})},n.state={notes:[],title:"",isFetching:!0,deletedNoteInd:[],pending:!1,fulfilled:!1,rejected:!1},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params;f.get("/notepads/".concat(t.gid,"/").concat(t.id)).then(function(t){t.data[0]&&e.setState({title:t.data[0].TITLE,isFetching:!1,author:t.data[0].name,notes:t.data[0].notes?JSON.parse(t.data[0].notes):[]})}).catch(function(e){console.log("err",e)})}},{key:"componentDidUpdate",value:function(e){var t=this,n=this.props.location.pathname;n!==e.location.pathname&&(this.setState({isFetching:!0}),f.get("/notepads".concat(n)).then(function(e){e.data[0]&&t.setState({notes:e.data[0].notes?JSON.parse(e.data[0].notes):[],title:e.data[0].TITLE,isFetching:!1})}).catch(function(e){}))}},{key:"renderContent",value:function(){var e=this;if(this.state.notes&&"object"===typeof this.state.notes&&!this.state.isFetching){var t=this.state.notes.map(function(t,n){return o.a.createElement(L,{key:n,gid:e.props.match.params.gid,note:t,updateNote:e.updateNote,deleteNote:e.deleteNote})});return o.a.createElement("main",null,o.a.createElement(A,{author:this.state.author,gid:this.props.match.params.gid,addNote:this.addNote,saveNotes:this.saveNotes,deleteNotes:this.deleteNotes,deleteNotepad:this.deleteNotepad,pending:this.state.pending,rejected:this.state.rejected,fulfilled:this.state.fulfilled}),o.a.createElement("h2",null,o.a.createElement(F,{handleTitleChange:this.handleTitleChange,saveTitle:this.saveTitle,title:this.state.title,gid:this.props.match.params.gid})),o.a.createElement("div",{className:"notes-container"},t))}return this.state.isFetching?o.a.createElement(B,null):null}},{key:"render",value:function(){return o.a.createElement("div",{className:"notepad-content"},this.renderContent())}}]),t}(o.a.Component)),M=Object(v.b)(function(e){return{userInfo:e.auth.userInfo}},{editNotepadTitle:function(e){return{type:"EDIT_NOTEPAD_TITLE",payload:e}}})(R),G=(n(80),function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"empty"},o.a.createElement("h1",{className:"empty-heading"},"Click on Add Notepad to Start"))}}]),t}(o.a.Component)),J=(n(81),n(82),n(83),n(84),function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement(p.a,null,o.a.createElement("div",null,o.a.createElement(y,null),o.a.createElement("div",{className:"container"},o.a.createElement(h.a,{exact:!0,path:"/",component:E}),o.a.createElement("div",{className:"content"},o.a.createElement(h.a,{path:"/:gid",component:k}),o.a.createElement(h.a,{exact:!0,path:"/:gid",component:G}),o.a.createElement(h.a,{path:"/:gid/:id",component:M})))))}}]),t}(o.a.Component)),H=n(12),q=n(25),W={isSignedIn:null,userId:null,userInfo:{}},X=n(16),Y=n(37),z=Object(H.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SIGN_IN":return Object(q.a)({},e,{isSignedIn:!0,userInfo:t.payload});case"SIGN_OUT":return Object(q.a)({},e,{isSignedIn:!1,userInfo:{}});default:return e}},userNotepads:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=e.slice();switch(t.type){case"FETCH_USER_NOTEPADS":return[].concat(Object(X.a)(e),Object(X.a)(t.payload));case"CREATE_USER_NOTEPAD":var a={id:t.payload.id,user_id:t.payload.user_id,TITLE:"untitled",created_at:"JUST NOW"};return[].concat(Object(X.a)(e),[a]);case"DELETE_USER_NOTEPAD":return n=n.filter(function(e){return e.id!==t.payload.id});case"EDIT_NOTEPAD_TITLE":return n=n.map(function(e){return String(e.id)===t.payload.id?(e.TITLE=t.payload.title,e):e});case"UNLOAD":return[];default:return e}},routing:Y.routerReducer,deleted:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case"NOTE_DELETED":return!0;case"NOTE_NOT_DELETED":return!1;default:return e}},added:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case"NOTE_ADDED":return!0;case"NOTE_NOT_ADDED":return!1;default:return e}}}),V=n(38),K=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||H.d,Q=Object(H.e)(z,K(Object(H.a)(V.a)));i.a.render(o.a.createElement(v.a,{store:Q},o.a.createElement(J,null)),document.querySelector("#root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.da22d19f.chunk.js.map